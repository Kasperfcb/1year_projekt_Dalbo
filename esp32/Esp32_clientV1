import network
import socket
import time

ssid = "Skoletest"
password = "1234567891"
server_ip = "192.168.75.151"
server_port = 8000

client = None

def connect_to_wifi():
    wifi = network.WLAN(network.STA_IF)
    wifi.active(True)
    wifi.connect(ssid, password)

    while not wifi.isconnected():
        pass

    print('Connected to WiFi:', wifi.ifconfig())

def connect_to_server():
    global client

    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect((server_ip, server_port))
    print('Connected to server:', server_ip)

def send_data(message):
    client.sendall(message)
    print('Sent data:', message)

def disconnect_from_server():
    client.close()
    print('Disconnected from server.')

def run_client():
    connect_to_wifi()
    connect_to_server()

    while True:
        message = input('Enter a message to send: ')
        send_data(message.encode())

run_client()
